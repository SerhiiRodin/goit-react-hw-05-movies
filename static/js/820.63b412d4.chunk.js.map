{"version":3,"file":"static/js/820.63b412d4.chunk.js","mappings":"mRAKAA,EAAAA,EAAAA,SAAAA,QAAA,UAHiB,+BAIjBA,EAAAA,EAAAA,SAAAA,OAAwB,CACtBC,QAJU,oCAOL,IAAMC,EAAe,WAG1B,OAFYF,EAAAA,EAAAA,IAAU,wBAGvB,EAEYG,EAAkB,SAAAC,GAG7B,OAFYJ,EAAAA,EAAAA,IAAA,kBAAqBI,EAArB,KAGb,EAEYC,EAAe,SAAAD,GAG1B,OAFYJ,EAAAA,EAAAA,IAAA,kBAAqBI,EAArB,aAGb,EAEYE,EAAkB,SAAAF,GAG7B,OAFYJ,EAAAA,EAAAA,IAAA,kBAAqBI,EAArB,aAGb,EAEYG,EAAiB,SAAAC,GAG5B,OAFYR,EAAAA,EAAAA,IAAA,gCAAmCQ,GAGhD,C,qFC2CD,UA7Ee,WAAO,IAAD,EAEnB,GAA4BC,EAAAA,EAAAA,UAAS,IAArC,eAAOC,EAAP,KAAeC,EAAf,KACA,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KAEMC,EAAaF,EAAaG,IAAb,UAAiB,SAAjB,EAA4B,IAEzCC,GAAWC,EAAAA,EAAAA,OAGjBC,EAAAA,EAAAA,YAAU,WACHJ,IAELR,EAAAA,EAAAA,IAAeQ,GAAYK,MAAK,YAA4B,IAAjBC,EAAgB,EAAxBC,KAAQD,QACzC,IACE,GAAuB,IAAnBA,EAAQE,OAMV,OALAC,MAAM,iBACNV,EAAgB,CAAEW,MAAO,KAEzBX,EAAgB,CAAC,QACjBH,EAAU,IAGZA,EAAUU,EAGX,CAFC,SACAG,MAAM,wBACP,CACF,GACF,GAAE,CAACT,EAAYD,IAsBhB,OACE,iCACE,kBAAMY,SAtBW,SAAAC,GACnBA,EAAMC,iBAEN,IAAQC,EAAUF,EAAMG,OAAOC,SAASvB,MAAhCqB,MAER,GAAqB,KAAjBA,EAAMG,OAIR,OAHAR,MAAM,2BAENV,EAAgB,CAAC,GAOnBA,EAAgB,CAAEW,MAAOI,EAAMG,SAE/BL,EAAMG,OAAOG,OACd,EAIG,WACE,kBACEC,KAAK,QACLC,KAAK,OACLC,YAAY,eACZC,WAAS,KAGX,mBAAQF,KAAK,SAAb,uBAEDzB,EAAOa,OAAS,IACf,wBACGb,EAAO4B,KAAI,SAAA9B,GAAK,OACf,yBACE,SAAC,KAAD,CAAM+B,GAAE,UAAK/B,EAAMgC,IAAMC,MAAO,CAAEC,KAAMzB,GAAxC,SACGT,EAAMmC,SAFFnC,EAAMgC,GADA,QAW1B,C","sources":["api/moviesApi.js","pages/Movies/Movies.js"],"sourcesContent":["import axios from 'axios';\n\nconst ENDPOINT = 'https://api.themoviedb.org/';\nconst KEY = 'e6e5040957b423292e46b69ab1c4061a';\n\naxios.defaults.baseURL = `${ENDPOINT}`;\naxios.defaults.params = {\n  api_key: KEY,\n};\n\nexport const getTrendList = () => {\n  const res = axios.get('/3/trending/movie/day');\n\n  return res;\n};\n\nexport const getMovieDetails = movieId => {\n  const res = axios.get(`3/movie/${movieId}?`);\n\n  return res;\n};\n\nexport const getCastMovie = movieId => {\n  const res = axios.get(`3/movie/${movieId}/credits?`);\n\n  return res;\n};\n\nexport const getReviewsMovie = movieId => {\n  const res = axios.get(`3/movie/${movieId}/reviews?`);\n\n  return res;\n};\n\nexport const getSearchMovie = movie => {\n  const res = axios.get(`3/search/movie?&query=${movie}`);\n\n  return res;\n};\n","import { getSearchMovie } from 'api/moviesApi';\nimport { useEffect, useState } from 'react';\nimport { Link, useLocation, useSearchParams } from 'react-router-dom';\n\nconst Movies = () => {\n  // const [inputValue, setInputValue] = useState('');\n  const [movies, setMovies] = useState([]);\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const inputValue = searchParams.get('input' ?? '');\n\n  const location = useLocation();\n  // console.log('Movies', location);\n\n  useEffect(() => {\n    if (!inputValue) return;\n\n    getSearchMovie(inputValue).then(({ data: { results } }) => {\n      try {\n        if (results.length === 0) {\n          alert('nothing found');\n          setSearchParams({ input: '' });\n          //Если набрали плохой запрос, то убирается этот запрос из URL input=\"ыаысы\"\n          setSearchParams({});\n          setMovies([]);\n          return;\n        }\n        setMovies(results);\n      } catch {\n        alert('Movies loading error.');\n      }\n    });\n  }, [inputValue, setSearchParams]);\n\n  const onFormSubmit = event => {\n    event.preventDefault();\n\n    const { value } = event.target.elements.movie;\n\n    if (value.trim() === '') {\n      alert('Enter movie title.');\n\n      setSearchParams({});\n      return;\n    }\n\n    // console.log(value);\n    // setInputValue(value.trim());\n\n    setSearchParams({ input: value.trim() });\n\n    event.target.reset();\n  };\n\n  return (\n    <>\n      <form onSubmit={onFormSubmit}>\n        <input\n          name=\"movie\"\n          type=\"text\"\n          placeholder=\"Search movie\"\n          autoFocus\n          // value={inputValue}\n        />\n        <button type=\"submit\">Search</button>\n      </form>\n      {movies.length > 0 && (\n        <ul>\n          {movies.map(movie => (\n            <li key={movie.id}>\n              <Link to={`${movie.id}`} state={{ from: location }}>\n                {movie.title}\n              </Link>\n            </li>\n          ))}\n        </ul>\n      )}\n    </>\n  );\n};\n\nexport default Movies;\n"],"names":["axios","api_key","getTrendList","getMovieDetails","movieId","getCastMovie","getReviewsMovie","getSearchMovie","movie","useState","movies","setMovies","useSearchParams","searchParams","setSearchParams","inputValue","get","location","useLocation","useEffect","then","results","data","length","alert","input","onSubmit","event","preventDefault","value","target","elements","trim","reset","name","type","placeholder","autoFocus","map","to","id","state","from","title"],"sourceRoot":""}